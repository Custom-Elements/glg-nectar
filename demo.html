<!doctype html>

<html>
  <head>
    <title>glg-nectar</title>
    <script src="http://localhost:35729/livereload.js"></script>
    <script src="node_modules/polymer/platform.js"></script>
    <link rel="stylesheet" href="node_modules/ui-fonts/build/font-awesome.css">
    <link rel="stylesheet" href="node_modules/ui-styles/ui-styles.css">
    <link rel="import" href="node_modules/polymer/polymer.html">
    <link rel="import" href="build/glg-nectar.html">
    <link rel="import" href="node_modules/ui-typeahead/build/ui-typeahead.html">
     <style>
      body {
        font-family: "Helvetica Neue", "Helvetica", Arial;
        color: #454545;
      }

      ui-typeahead {
        width: 50%;
      }

    </style> 
  </head>
  <body unresolved>
    <div id="holder" tile>
      <!-- nectar wrapper -->
      <glg-nectar 
          urls="wss://nectar.glgroup.com/ws"
          entities='["cm", "cm-localized"]'
          trigger="inputChange"
          limit="20"
          >
        <ui-typeahead 
          icon="fa-search"
          placeholder="Enter stuff"
          debounce="200">
              <template id="results" repeat="{{resultset}}">
                  <template repeat="{{results}}">
                    <ui-typeahead-item>
                      <i class="fa fa-user {{type}}"></i>
                      <strong>{{name}}</strong>
                      <span>{{title}}</span>
                    </ui-typeahead-item>
                  </template>
              </template>
        </ui-typeahead>
      </glg-nectar>
    </div>
    <script>
      document.addEventListener('polymer-ready', function() {
        //poke your element here
        var nectar = document.querySelector('glg-nectar');
        var template = document.querySelector('#results');

        nectar.addEventListener('results', function(evt) {
          template.model = evt.detail;
          Platform.performMicrotaskCheckpoint();
          console.log("template model updated", template.model);
        });
      });
    </script>
  </body>
</html>
